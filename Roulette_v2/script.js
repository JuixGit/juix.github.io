const items_dictionary = 
[[
    [
        [
            "[❓] Ta plus grande peur ?", 
            "[❓] Un plat que tu pourrais manger 10j d'affilée ?", 
            "[❓] Ton voyage de rêve ?", 
            "[❓] Ton métier de rêve ?", 
            "[❓] Ta musique préférée ?", 
            "[❓] Ton activité préférée ?", 
            "[❓] La chose la plus folle que tu aies jamais faite ?", 
            "[❓] Quelle célébrité aimerais-tu rencontrer ?",
            "[❓] Si tu pouvais avoir un super pouvoir, lequel ?",
            "[❓] Ce que tu aimes dans le groupe ici présent",
            "[❓] C'est quoi le plus gros green flag chez un mec/une meuf ?",
            "[❓] C'est quoi le plus gros red flag chez un mec/une meuf ?",
            "[❓] Quelque chose que tu adores",
            "[❓] Un truc que tu détestes",
            "[❓] Ton avis sur la pizza à l'ananas ?",
            "[❓] Céréales avant ou après le lait ?",
            "[❓] C'est quoi ton jeu vidéo/sport préféré ?",
        ],[
            "[👥] Avec qui tu aimerais passer davantage de temps à l'avenir ?",
            "[👥] Qui aimerais-tu découvrir davantage ?",
            "[👥] Qui te plaît le plus physiquement ?",
            "[👥] Qui te semble le plus sympa ?",
        ],[
            "[☝️] Montre-nous ta meilleure danse bien gênante pendant 10s",
            "[☝️] Assieds-toi par terre jusqu'à ton prochain tour"
        ]
    ],[
        [
            "[❓] Une qualité indispensable pour être ton/ta partenaire ?",
            "[❓] Une qualité indispensable pour être ton/ta pote ?",
            "[❓] Un défaut qu'il ne faut surtout pas avoir pour traîner avec toi ?",
            "[❓] Un regret marquant ?",
            "[❓] Un remord tracassant ?",
            "[❓] Sur une échelle de 1 à 10, à quel point es-tu gay ?",
            "[❓] Tu pourrais retourner avec un(e) de tes exs ?",
        ],[
            "[👥] Sur une échelle de 1 à 10, à quel point la personne à ta gauche est-elle gay ?",
            "[👥] Si tu devais choisir un adjectif pour décrire la personne en face de toi parmi : gay, pédophile, trisomique ?",
            "[👥] Avoue un petit défaut à la personne à ta droite",
            "[👥] Trouve une qualité à la personne deux places à ta gauche",
            "[👥] Ce que tu préfères chez la personne la plus loin de toi",
            "[👥] Tu partirais où 1an avec la personne à ta gauche ?",
            "[👥] Une personne avec qui tu pourrais vivre 1 an sans souci ?",
            "[👥] La personne avec laquelle tu pourrais le moins te disputer ?",
            "[👥] La personne avec laquelle tu pourrais le plus être en couple ?",
            "[👥] La personne avec laquelle tu pourrais le plus parler librement ?",
            "[👥] La personne à laquelle tu peux confier d'importants secrets ?",
        ],[
            "[☝️] Fais un câlin à quelqu'un dont tu en as très envie",
            "[☝️] Dévoile une particularité physique"
        ]
    ],[
        [
            "[❓] Un fétiche ?",
            "[❓] L'endroit où tu rêverais de faire l'amour",
            "[❓] L'endroit le plus insolite où tu t'es masturbé ?",
            "[❓] Ta plus grande honte pendant une branlette",
            "[❓] La durée de ta plus longue branlette",
            "[❓] Une anecdote marquante à propos d'une de tes branlettes",
            "[❓] Une célébrité que tu détruirais ?",
            "[❓] La couleur de ton sous-vêtement ?",
            "[❓] Ta catégorie porno préférée ?",
            "[❓] T'as déjà envoyé ou reçu une nude ?",
            "[❓] T'as déjà entendu un membre de ta famille ou voisin ken ?",
        ],[
            "[👥] Qui a le plus beau cul ici ?",
            "[👥] La personne avec laquelle tu pourrais regarder un porno ?",
            "[👥] La personne à laquelle tu pourrais partager ton historique ?",
            "[👥] La personne qui ken le mieux selon toi ?",
            "[👥] Le mec qui se décrypte le plus le Hugo ?",
            "[👥] La personne qui restera le plus longtemps vierge ?"
        ],[

        ]
    ],[
        [
            "[❓] Dominé(e), ça te ferait kiffer ?",
            "[❓] La taille ton sexe/poitrine ?",
            "[❓] Une position pref ?",
            "[❓] Un fantasme de thème comme les nurses, nekos, ou menottes ?",
            "[❓] Un rêve érotique avec quelqu'un d'ici ça t'est arrivé ?",
            "[❓] Classe par préférence : Sexe vaginal ; oral ; anal",
            "[❓] Décris ton sexe",
        ],[
            "[👥] Avoue le meilleur argument qu'a la personne en face de toi",
            "[👥] La personne 3 places à ta droite est à toi. Tu lui ferais quoi ?",
            "[👥] Coucher avec la personne la plus loin de toi ou orgie tous ensemble ?",
            "[👥] Avec qui tu ne pourrais absolument pas coucher ?",
            "[👥] Coucher avec les 2 personnes de ton choix ou rien ?",
            "[👥] Sodomiser la personne à ta gauche ou perdre 250€ ?",
            "[👥] Te faire sodomiser par la personne à ta droite ou la sodomiser 2x ?"
        ],[

        ]
    ]
],[
    [
        [
            "[❓] La tua più grande paura?", 
            "[❓] Un piatto che potresti mangiare per 10 volte di seguito?", 
            "[❓] Il viaggio dei tuoi sogni?", 
            "[❓] Il lavoro dei tuoi sogni?", 
            "[❓] La tua musica preferita?", 
            "[❓] La tua attività preferita?", 
            "[❓] La cosa più pazza che hai fatto?", 
            "[❓] Quale celebrità vorresti incontrare?",
            "[❓] Se potessi avere un superpotere, quale sarebbe?",
            "[❓] Cosa ti piace della band qui presente",
            "[❓] Qual è la più grande bandiera verde in un ragazzo/una ragazza?",
            "[❓] Qual è la più grande bandiera rossa in un ragazzo/una ragazza?",
            "[❓] Qualcosa che ami",
            "[❓] Qualcosa che odi",
            "[❓] La tua opinione sulla pizza all'ananas?",
            "[❓] Cereali prima o dopo il latte?",
            "[❓] Qual è il tuo videogioco/sport preferito?",
        ],[
            "[👥] Con chi vorresti passare più tempo in futuro?",
            "[👥] Chi vorresti scoprire di più?",
            "[👥] Chi ti piace di più fisicamente?",
            "[👥] Chi trovi più simpatico?",
        ],[
            "[☝️] Mostraci il tuo miglior ballo imbarazzante per 10s",
            "[☝️] Siediti a terra fino al prossimo turno"
        ]
    ],[
        [
            "[❓] Una qualità indispensabile per essere il vostro/la vostra partner?",
            "[❓] Una qualità indispensabile per essere il vostro/la vostra compagno/a?",
            "[❓] Un difetto che non devi assolutamente avere per frequentarti?",
            "[❓] Un rimpianto notevole?",
            "[❓] Un rimorso assillante?",
            "[❓] Su una scala da 1 a 10, quanto sei gay?",
            "[❓] Potresti tornare insieme a uno dei tuoi ex?",
        ],[
            "[👥] Su una scala da 1 a 10, quanto è gay la persona alla tua sinistra?",
            "[👥] Se dovessi scegliere un aggettivo per descrivere la persona di fronte a te tra: gay, pedofilo, sindrome di Down?",
            "[👥] Ammetti un piccolo difetto alla persona alla tua destra",
            "[👥] Trova una qualità nella persona che si trova due posti alla tua sinistra",
            "[👥] Cosa ti piace di più della persona più lontana da te",
            "[👥] Dove andresti 1 anno con la persona alla tua sinistra?",
            "[👥] Una persona con cui potresti vivere 1 anno senza preoccupazioni?",
            "[👥] La persona con cui potresti discutere di meno?",
            "[👥] La persona con cui potresti avere più relazioni?",
            "[👥] La persona con cui potresti parlare più liberamente?",
            "[👥] La persona a cui puoi confidare segreti importanti?",
        ],[
            "[☝️] Abbraccia qualcuno che vuoi davvero",
            "[☝️] Rivela una particolarità fisica"
        ]
    ],[
        [
            "[❓] Un feticcio?",
            "[❓] Il luogo dove si sogna di fare l'amore",
            "[❓] Il posto più insolito in cui ti sei masturbato?",
            "[❓] La tua più grande vergogna durante una sega",
            "[❓] La lunghezza della tua più lunga sega",
            "[❓] Un aneddoto memorabile su una delle tue seghe",
            "[❓] Una celebrità che distruggeresti?",
            "[❓] Il colore della tua biancheria intima?",
            "[❓] La tua categoria porno preferita?",
            "[❓] Hai mai inviato o ricevuto un nudo?",
            "[❓] Hai mai sentito un familiare o un vicino di casa fare ken?",
        ],[
            "[👥] Chi ha il miglior culo qui intorno?",
            "[👥] La persona con cui potresti guardare un porno?",
            "[👥] La persona con cui potresti condividere la tua storia?",
            "[👥] La persona che ritieni migliore?",
            "[👥] La persona che decifra meglio l'Hugo?",
            "[👥] La persona che rimarrà vergine più a lungo?"
        ],[

        ]
    ],[
        [
            "[❓] Dominato, questo ti farebbe diventare kiffer?",
            "[❓] Le dimensioni del tuo sesso/torace?",
            "[❓] Una posizione preferita?",
            "[❓] Una fantasia a tema come infermiere, neko o manette?",
            "[❓] Un sogno erotico con qualcuno di qui, ti è mai capitato?",
            "[❓] Classificazione per preferenze: sesso vaginale; orale; anale",
            "[❓] Descrivi il tuo sesso",
        ],[
            "[👥] Confessa il miglior argomento della persona che hai di fronte",
            "[👥] La persona 3 posti alla tua destra è tua. Cosa gli faresti?",
            "[👥] Dormi con la persona più lontana da te o fai un'orgia tutti insieme?",
            "[👥] Con chi non andresti assolutamente a letto?",
            "[👥] Dormire con le due persone a tua scelta o niente?",
            "[👥] Sodomizzare la persona alla tua sinistra o perdere 250€?",
            "[👥] Fatti sodomizzare dalla persona alla tua destra o sodomizzala 2 volte?"
        ],[

        ]
    ]
]];

var items_fr = [];
var items_it = [];
window.onload = setItems;

var items = items_fr;
var counter = 0;
var delay = 0;

function play() { //Passe à la question suivante avec animation de Pop
    // counter++;
    // if (counter > items.length-1) {
    //     counter = 0;
    // }
    counter = Math.floor(Math.random() * items.length);
    
    document.getElementById("show").innerHTML = items[counter];
    new Audio("tic.mp3").play();

    document.getElementById("show").className = "text";
    window.requestAnimationFrame(function (time) {
        window.requestAnimationFrame(function (time) {
            document.getElementById("show").className = "text active";
        });
    });
}

function done() { //Roll final : audio + apparition de la traduction (option 2)
    new Audio("done.mp3").play();
    if (document.getElementById('option-2').checked){
        tradRefresh();
        document.getElementById("trad").className = "text trad active";
    }
    if (!(document.getElementById('option-3').checked)){ //Suppression auto des questions déjà posées
        items_fr.splice(counter, 1);
        items_it.splice(counter, 1);
        items.splice(counter, 1);
    }
    if (items.length <= 1){ //Réinitialisation des questions si toutes ont été posées
        setItems()
    }
}

function tradRefresh() { //Affichage de la traduction (option 2)
    if (document.querySelector('button.lang').className.match('fr')) { 
        document.getElementById("trad").innerHTML = items_it[counter];
    } else {
        document.getElementById("trad").innerHTML = items_fr[counter];
    }
}
function enableTrad(){ //Cache la traduction à la (dés)activation de l'option 2
    document.getElementById("trad").className = "text trad";
}

function start(){ //Bouton Lancer : lance les rolls aléatoires avec délais
    if (document.getElementById('option-2').checked){
        document.getElementById("trad").className = "text trad";
    }
    if (document.getElementById('option-1').checked){
        counter = Math.floor(Math.random() * items.length);
        setTimeout(play, 0);
        setTimeout(done, 100);
    } else {
        delay = Math.floor(Math.random() * (50 - 10)) + 10;
        // coef = (Math.floor(Math.random() * (125 - 105)) + 105)/100
        coef = document.querySelector('.coef_value').offsetWidth/100;
        console.log("coef: " + coef);
        counter = Math.floor(Math.random() * items.length);
        console.log("starting choice: " + items[counter]);

        setTimeout(play, 0);
        while ((delay*coef+10)-delay < 1000) {
            setTimeout(play, delay);
            // console.log("delay: " + delay);
            delay = delay*coef + 10;
            coef+=0.002;
        }
        setTimeout(play, delay);
        setTimeout(done, delay+1000);
        console.log("last delay: " + delay);
    }
}

function switchLang() { //Bouton de Langue : intervertis les deux langues
    document.querySelector('button.lang').classList.toggle('it');
    document.querySelector('button.lang').classList.toggle('fr');
    
    refreshLang();
    if (document.getElementById("show").innerHTML !== " ‎ ") {
        document.getElementById("show").innerHTML = items[counter];

        if (document.getElementById('option-2').checked){
            tradRefresh();
        }
    }
}
function refreshLang() { //Actualise les questions selon la langue choisie
    if (document.querySelector('button.lang').className.match('fr')) { 
        items = items_fr;
    } else {
        items = items_it;
    }

    // console.log(items)
}

function hamburgerDeploy() { //Ouvre/Ferme le volet d'options
    const hamburger = document.querySelector('.hamburger')
    const hamburger_menu = document.querySelector('.hamburger_menu')

    hamburger.classList.toggle('active');
    hamburger_menu.classList.toggle('active');
}

function setItems(){ //Actualise la liste des questions en fonction des sélections
    document.getElementById("show").innerHTML = " ‎ ";
    document.getElementById("trad").innerHTML = " ‎ ";

    items_fr = [] ; items_it=[];

    // c = category   ;   f = filter   ;   i = item
    // items_dictionary [lang] [category] [filter] [item]
    for (let c = 0; c < 4; c++) { // <--- number of categories
        if (document.getElementById("categories").children[c].children[0].checked){

            for (let f = 0; f < 3; f++) { // <--- number of filters
                if (document.getElementById("filters").children[f].children[0].checked){

                    for (let i = 0; i < items_dictionary[0][c][f].length; i++) {
                        items_fr.push(items_dictionary[0][c][f][i]);
                        items_it.push(items_dictionary[1][c][f][i]);
                    };
                };
            };
        };
    };

    refreshLang();
}